{{>partial_header}}
package {{packageName}}

import (
	"fmt"
	"net/http"
	"github.com/ya-breeze/geekbudgetbe/pkg/config"
)

func Serve(cfg *config.Config) error {
{{#apiInfo}}{{#apis}}
	{{classname}}Service := New{{classname}}Service()
	{{classname}}Controller := New{{classname}}Controller({{classname}}Service)
{{/apis}}{{/apiInfo}}
	router := NewRouter({{#apiInfo}}{{#apis}}{{classname}}Controller{{^-last}}, {{/-last}}{{/apis}}{{/apiInfo}})

	return http.ListenAndServe(fmt.Sprintf(":%d", cfg.Port), router)
}
