<h2 mat-dialog-title>Upload Transactions</h2>
<mat-dialog-content class="upload-dialog-content">
    <p class="description">
        Upload file for <strong>{{ bankImporter.name }}</strong>
    </p>

    <div
        class="file-upload-area"
        (click)="fileInput.click()"
        (drop)="onFileDrop($event)"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        [class.dragging]="isDragging()"
    >
        <input
            #fileInput
            type="file"
            (change)="onFileSelected($event)"
            style="display: none"
            [accept]="selectedFormat() === 'csv' ? '.csv' : '.xlsx, .xls'"
        />

        <mat-icon class="upload-icon">cloud_upload</mat-icon>

        @if (selectedFile()) {
            <div class="file-info">
                <span class="file-name">{{ selectedFile()?.name }}</span>
                <button mat-icon-button (click)="$event.stopPropagation(); selectedFile.set(null)">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        } @else {
            <p class="upload-prompt">Click to browse or drag file here</p>
        }
    </div>

    <mat-form-field appearance="outline" class="format-field">
        <mat-label>Format</mat-label>
        <mat-select [ngModel]="selectedFormat()" (ngModelChange)="selectedFormat.set($event)">
            <mat-option value="csv">CSV</mat-option>
            <mat-option value="xlsx">Excel (XLSX)</mat-option>
        </mat-select>
    </mat-form-field>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" [disabled]="!selectedFile()" (click)="onUpload()">
        Upload
    </button>
</mat-dialog-actions>
